!function(n){function e(e){for(var o,s,r=e[0],c=e[1],d=e[2],l=0,p=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(n[o]=c[o]);for(u&&u(e);p.length;)p.shift()();return i.push.apply(i,d||[]),t()}function t(){for(var n,e=0;e<i.length;e++){for(var t=i[e],o=!0,r=1;r<t.length;r++){var c=t[r];0!==a[c]&&(o=!1)}o&&(i.splice(e--,1),n=s(s.s=t[0]))}return n}var o={},a={0:0},i=[];function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=n,s.c=o,s.d=function(n,e,t){s.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},s.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},s.t=function(n,e){if(1&e&&(n=s(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)s.d(t,o,function(e){return n[e]}.bind(null,o));return t},s.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return s.d(e,"a",e),e},s.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},s.p="";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var u=c;i.push([2,1]),t()}([,function(n,e){n.exports="<section data-transition=slide data-background=images/sound-wave.jpg data-background-opacity=0.4><h2 style=color:#95cfff>Web Audio API</h2></section>"},function(n,e,t){"use strict";t.r(e);var o=t(0),a=t.n(o),i=t(1),s=t.n(i);t(5);document.body.innerHTML=`<div class="reveal">\n<div class="slides">\n   ${s.a}\n\n   <section>\n   <p>The Web Audio API provides a powerful and versatile system for controlling audio on the Web, allowing\n     developers to choose audio sources, add effects to audio, create audio visualizations and much more.\n   </p>\n </section>\n\n <section>\n   <section data-background='#fff'>\n     <img src="images/audio-history.jpg" alt="audio-history" style="width: 100%">\n   </section>\n   <section>\n     <p>The Web Audio API involves handling audio operations inside an audio context,\n       and has been designed to allow modular routing. Basic audio operations are performed\n       with audio nodes, which are linked together to form an audio routing graph.\n     </p>\n   </section>\n   <section>\n     <p>Audio nodes are linked into chains and simple webs by their inputs and outputs. They typically\n       start\n       with one or more sources. Sources provide arrays of sound intensities (samples) at very small\n       timeslices,\n       often tens of thousands of them per second.\n     </p>\n   </section>\n </section>\n <section>\n   <img src="images/audio-context.png" alt="audio-context">\n   <pre class="fragment" style="width: 100%;"><code class="hljs" data-trim >\n     var context = new (window.AudioContext || window.webkitAudioContext)();\n   </code></pre>\n </section>\n <section id="fragments">\n   <h3> There are three types of sources:</h3>\n   <ul>\n     <li class="fragment"><span>Oscillator</span> <span class="fragment">\n         – mathematically computed sounds</span></li>\n     <li class="fragment"><span>Audio Samples</span> <span class="fragment">\n         – from audio/video files</span></li>\n     <li class="fragment"><span>Audio Stream</span> <span class="fragment">\n         – audio from webcam or microphone</span></li>\n   </ul>\n </section>\n <section>\n   <h3>oscillator</h3>\n   <img src="images/waveforms.png" alt="waveforms" class="fragment" style="width: 70%;">\n   <pre class="fragment"><code class="hljs livescript" data-trim >\nOscillatorNode.type = 'sine'|'square'|'triangle'|'sawtooth';\n</code>\n     </pre>\n\n </section>\n <section>\n   <pre style="width:100%"><code class="hljs" data-trim data-line-numbers="1|2|3|4|5|6">\nvar context = new (window.AudioContext || window.webkitAudioContext)();\nvar oscillator = context.createOscillator();\noscillator.type = 'sine';\noscillator.frequency.value = 440;\noscillator.connect(context.destination);\noscillator.start();\n</code>\n   </pre>\n </section>\n <section>\n   <h3>Timing of Web Audio API</h3>\n   <pre class="fragment"><code class="hljs" data-trim >\nvar now = context.currentTime;\noscillator.play(now + 1);\noscillator.stop(now + 3);\n     </code>\n   </pre>\n   <p class="fragment">AudioParam.setValueAtTime(value, startTime)</p>\n   <pre style="width:100%" class="fragment"><code class="hljs" data-trim >\n     oscillator.frequency.setValueAtTime(261.6, context.currentTime + 1);\n             </code>\n           </pre>\n\n   <p class="fragment">AudioParam.exponentialRampToValueAtTime(value, endTime)</p>\n   <pre style="width:100%" class="fragment"><code class="hljs" data-trim >\n             gain.gain.exponentialRampToValueAtTime(0.001, context.currentTime + 1);\n                     </code>\n                   </pre>\n </section>\n <section>\n   <section>\n     <h3>recorded sound</h3>\n\n     <p class="fragment">loading a sound sample</p>\n     <pre class="fragment" style="width: 105%"><code class="hljs" data-trim style="max-height: 1200px" >\n     var dogBarkingBuffer = null;\n     // Fix up prefixing\n     window.AudioContext = window.AudioContext || window.webkitAudioContext;\n     var context = new AudioContext();\n\n     function loadDogSound(url) {\n     var request = new XMLHttpRequest();\n     request.open('GET', url, true);\n     request.responseType = 'arraybuffer';\n\n     // Decode asynchronously\n     request.onload = function() {\n       context.decodeAudioData(request.response, function(buffer) {\n       dogBarkingBuffer = buffer;\n       }, onError);\n     }\n     request.send();\n     }\n     </code></pre>\n\n   </section>\n\n   <section>\n     <h4>Playing sounds</h4>\n     <pre style="width: 105%"><code class="hljs" data-trim >\n   // Fix up prefixing\n   window.AudioContext = window.AudioContext || window.webkitAudioContext;\n   var context = new AudioContext();\n   \n   function playSound(buffer) {\n     var source = context.createBufferSource(); // creates a sound source\n     source.buffer = buffer;                    // tell which sound to play\n     source.connect(context.destination);       // connect to the destination \n     source.start(0);                           // play the source now\t\t\t\t\t\t\t\t\t\t\t\t\n   }\n   \n   </code></pre>\n   </section>\n   <section>\n     <h4>Changing the volume of a sound</h4>\n     <pre style="width: 105%"><code class="hljs" data-trim >\n   // Create a gain node.\n   var gainNode = context.createGain();\n   // Connect the source to the gain node.\n   source.connect(gainNode);\n   // Connect the gain node to the destination.\n   gainNode.connect(context.destination);\n   // Reduce the volume.\n   gainNode.gain.value = 0.5;\n   </code></pre>\n   </section>\n </section>\n <section>\n   <section>\n     <img src="images/audio-context-multi.png" alt="audio-context-multi" style="width: 60%">\n   </section>\n   <section>\n     <h4>Abstracting the Web Audio API</h4>\n     <pre class="fragment" style="width: 105%"><code class="hljs" data-trim  style="max-height: 1200px">\n   window.onload = init;\n   var context;\n   var bufferLoader;\n   function init() {\n     context = new webkitAudioContext();\n     bufferLoader = new BufferLoader(\n     context,\n     [ '../sounds/hyper-reality/br-jam-loop.wav',\n       '../sounds/hyper-reality/laughter.wav', ],\n     finishedLoading\n     );\n   bufferLoader.load();\n   }\n   function finishedLoading(bufferList) {\n     // Create two sources and play them both together.\n     var source1 = context.createBufferSource();\n     var source2 = context.createBufferSource();\n     source1.buffer = bufferList[0];\n     source2.buffer = bufferList[1];\n     source1.connect(context.destination);\n     source2.connect(context.destination);\n     source1.start(0);\n     source2.start(0);\n   }\n   \n   </code></pre>\n   </section>\n </section>\n <section data-background="images/sound-wave2.jpg" data-background-opacity="0.4"  data-background-transition="convex">\n   <p>Thank you</p>\n </section>\n\n </section>\n\n </div>\n</div>`,a.a.initialize({controls:!0,touch:!0,dependencies:[{src:"plugin/highlight/highlight.js",async:!0},{src:"plugin/notes/notes.js",async:!0}]})},,,function(n,e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NsaWRlcy9zbGlkZS0wLnB1ZyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvaW5kZXguanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIwIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJkb2N1bWVudCIsImJvZHkiLCJpbm5lckhUTUwiLCJyZXZlYWxTbGlkZTAiLCJSZXZlYWwiLCJpbml0aWFsaXplIiwiY29udHJvbHMiLCJ0b3VjaCIsImRlcGVuZGVuY2llcyIsInNyYyIsImFzeW5jIl0sIm1hcHBpbmdzIjoi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QixTQUMvQyxXQUE4QixPQUFPQSxHQUV0QyxPQURBTCxFQUFvQlMsRUFBRUUsRUFBUSxJQUFLQSxHQUM1QkEsR0FJUlgsRUFBb0JZLEVBQUksU0FBU2dCLEVBQVFDLEdBQVksT0FBTy9DLE9BQU9DLFVBQVVDLGVBQWVDLEtBQUsyQyxFQUFRQyxJQUd6RzdCLEVBQW9COEIsRUFBSSxHQUV4QixJQUFJQyxFQUFhQyxPQUFxQixhQUFJQSxPQUFxQixjQUFLLEdBQ2hFQyxFQUFtQkYsRUFBVzVDLEtBQUt1QyxLQUFLSyxHQUM1Q0EsRUFBVzVDLEtBQU9mLEVBQ2xCMkQsRUFBYUEsRUFBV0csUUFDeEIsSUFBSSxJQUFJdkQsRUFBSSxFQUFHQSxFQUFJb0QsRUFBV2xELE9BQVFGLElBQUtQLEVBQXFCMkQsRUFBV3BELElBQzNFLElBQUlVLEVBQXNCNEMsRUFJMUIxQyxFQUFnQkosS0FBSyxDQUFDLEVBQUUsSUFFakJNLEksaUJDcEpUWSxFQUFPRCxRQUZJLHlKLDZCQ0RYLGdEQUtBK0IsU0FBU0MsS0FBS0MsVUFBYSxrREFFdEJDLGk0TUEwTExDLElBQU9DLFdBQVcsQ0FDaEJDLFVBQVUsRUFDVkMsT0FBTyxFQUNQQyxhQUFjLENBQ1osQ0FBRUMsSUFBSyxnQ0FBaUNDLE9BQU8sR0FDL0MsQ0FBRUQsSUFBSyx3QkFBeUJDLE9BQU8sTyIsImZpbGUiOiJtYWluLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MDogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbMiwxXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxzZWN0aW9uIGRhdGEtdHJhbnNpdGlvbj1zbGlkZSBkYXRhLWJhY2tncm91bmQ9aW1hZ2VzL3NvdW5kLXdhdmUuanBnIGRhdGEtYmFja2dyb3VuZC1vcGFjaXR5PTAuND48aDIgc3R5bGU9Y29sb3I6Izk1Y2ZmZj5XZWIgQXVkaW8gQVBJPC9oMj48L3NlY3Rpb24+XCI7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGNvZGU7IiwiaW1wb3J0IFJldmVhbCBmcm9tICdyZXZlYWwuanMnO1xuaW1wb3J0IHJldmVhbFNsaWRlMCBmcm9tICdEOi9XRUIvcnMgc2Nob29sL1ByZXNlbnRhdGlvbiBXZWIgQXVkaW8gQXBpL3NyYy9zbGlkZXMvc2xpZGUtMC5wdWcnO1xuXG5pbXBvcnQgJ3Nhc3MvbWFpbi5zY3NzJztcblxuZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cInJldmVhbFwiPlxuPGRpdiBjbGFzcz1cInNsaWRlc1wiPlxuICAgJHtyZXZlYWxTbGlkZTB9XG5cbiAgIDxzZWN0aW9uPlxuICAgPHA+VGhlIFdlYiBBdWRpbyBBUEkgcHJvdmlkZXMgYSBwb3dlcmZ1bCBhbmQgdmVyc2F0aWxlIHN5c3RlbSBmb3IgY29udHJvbGxpbmcgYXVkaW8gb24gdGhlIFdlYiwgYWxsb3dpbmdcbiAgICAgZGV2ZWxvcGVycyB0byBjaG9vc2UgYXVkaW8gc291cmNlcywgYWRkIGVmZmVjdHMgdG8gYXVkaW8sIGNyZWF0ZSBhdWRpbyB2aXN1YWxpemF0aW9ucyBhbmQgbXVjaCBtb3JlLlxuICAgPC9wPlxuIDwvc2VjdGlvbj5cblxuIDxzZWN0aW9uPlxuICAgPHNlY3Rpb24gZGF0YS1iYWNrZ3JvdW5kPScjZmZmJz5cbiAgICAgPGltZyBzcmM9XCJpbWFnZXMvYXVkaW8taGlzdG9yeS5qcGdcIiBhbHQ9XCJhdWRpby1oaXN0b3J5XCIgc3R5bGU9XCJ3aWR0aDogMTAwJVwiPlxuICAgPC9zZWN0aW9uPlxuICAgPHNlY3Rpb24+XG4gICAgIDxwPlRoZSBXZWIgQXVkaW8gQVBJIGludm9sdmVzIGhhbmRsaW5nIGF1ZGlvIG9wZXJhdGlvbnMgaW5zaWRlIGFuIGF1ZGlvIGNvbnRleHQsXG4gICAgICAgYW5kIGhhcyBiZWVuIGRlc2lnbmVkIHRvIGFsbG93IG1vZHVsYXIgcm91dGluZy4gQmFzaWMgYXVkaW8gb3BlcmF0aW9ucyBhcmUgcGVyZm9ybWVkXG4gICAgICAgd2l0aCBhdWRpbyBub2Rlcywgd2hpY2ggYXJlIGxpbmtlZCB0b2dldGhlciB0byBmb3JtIGFuIGF1ZGlvIHJvdXRpbmcgZ3JhcGguXG4gICAgIDwvcD5cbiAgIDwvc2VjdGlvbj5cbiAgIDxzZWN0aW9uPlxuICAgICA8cD5BdWRpbyBub2RlcyBhcmUgbGlua2VkIGludG8gY2hhaW5zIGFuZCBzaW1wbGUgd2VicyBieSB0aGVpciBpbnB1dHMgYW5kIG91dHB1dHMuIFRoZXkgdHlwaWNhbGx5XG4gICAgICAgc3RhcnRcbiAgICAgICB3aXRoIG9uZSBvciBtb3JlIHNvdXJjZXMuIFNvdXJjZXMgcHJvdmlkZSBhcnJheXMgb2Ygc291bmQgaW50ZW5zaXRpZXMgKHNhbXBsZXMpIGF0IHZlcnkgc21hbGxcbiAgICAgICB0aW1lc2xpY2VzLFxuICAgICAgIG9mdGVuIHRlbnMgb2YgdGhvdXNhbmRzIG9mIHRoZW0gcGVyIHNlY29uZC5cbiAgICAgPC9wPlxuICAgPC9zZWN0aW9uPlxuIDwvc2VjdGlvbj5cbiA8c2VjdGlvbj5cbiAgIDxpbWcgc3JjPVwiaW1hZ2VzL2F1ZGlvLWNvbnRleHQucG5nXCIgYWx0PVwiYXVkaW8tY29udGV4dFwiPlxuICAgPHByZSBjbGFzcz1cImZyYWdtZW50XCIgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIj48Y29kZSBjbGFzcz1cImhsanNcIiBkYXRhLXRyaW0gPlxuICAgICB2YXIgY29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpO1xuICAgPC9jb2RlPjwvcHJlPlxuIDwvc2VjdGlvbj5cbiA8c2VjdGlvbiBpZD1cImZyYWdtZW50c1wiPlxuICAgPGgzPiBUaGVyZSBhcmUgdGhyZWUgdHlwZXMgb2Ygc291cmNlczo8L2gzPlxuICAgPHVsPlxuICAgICA8bGkgY2xhc3M9XCJmcmFnbWVudFwiPjxzcGFuPk9zY2lsbGF0b3I8L3NwYW4+IDxzcGFuIGNsYXNzPVwiZnJhZ21lbnRcIj5cbiAgICAgICAgIOKAkyBtYXRoZW1hdGljYWxseSBjb21wdXRlZCBzb3VuZHM8L3NwYW4+PC9saT5cbiAgICAgPGxpIGNsYXNzPVwiZnJhZ21lbnRcIj48c3Bhbj5BdWRpbyBTYW1wbGVzPC9zcGFuPiA8c3BhbiBjbGFzcz1cImZyYWdtZW50XCI+XG4gICAgICAgICDigJMgZnJvbSBhdWRpby92aWRlbyBmaWxlczwvc3Bhbj48L2xpPlxuICAgICA8bGkgY2xhc3M9XCJmcmFnbWVudFwiPjxzcGFuPkF1ZGlvIFN0cmVhbTwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJmcmFnbWVudFwiPlxuICAgICAgICAg4oCTIGF1ZGlvIGZyb20gd2ViY2FtIG9yIG1pY3JvcGhvbmU8L3NwYW4+PC9saT5cbiAgIDwvdWw+XG4gPC9zZWN0aW9uPlxuIDxzZWN0aW9uPlxuICAgPGgzPm9zY2lsbGF0b3I8L2gzPlxuICAgPGltZyBzcmM9XCJpbWFnZXMvd2F2ZWZvcm1zLnBuZ1wiIGFsdD1cIndhdmVmb3Jtc1wiIGNsYXNzPVwiZnJhZ21lbnRcIiBzdHlsZT1cIndpZHRoOiA3MCU7XCI+XG4gICA8cHJlIGNsYXNzPVwiZnJhZ21lbnRcIj48Y29kZSBjbGFzcz1cImhsanMgbGl2ZXNjcmlwdFwiIGRhdGEtdHJpbSA+XG5Pc2NpbGxhdG9yTm9kZS50eXBlID0gJ3NpbmUnfCdzcXVhcmUnfCd0cmlhbmdsZSd8J3Nhd3Rvb3RoJztcbjwvY29kZT5cbiAgICAgPC9wcmU+XG5cbiA8L3NlY3Rpb24+XG4gPHNlY3Rpb24+XG4gICA8cHJlIHN0eWxlPVwid2lkdGg6MTAwJVwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSBkYXRhLWxpbmUtbnVtYmVycz1cIjF8MnwzfDR8NXw2XCI+XG52YXIgY29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpO1xudmFyIG9zY2lsbGF0b3IgPSBjb250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKTtcbm9zY2lsbGF0b3IudHlwZSA9ICdzaW5lJztcbm9zY2lsbGF0b3IuZnJlcXVlbmN5LnZhbHVlID0gNDQwO1xub3NjaWxsYXRvci5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xub3NjaWxsYXRvci5zdGFydCgpO1xuPC9jb2RlPlxuICAgPC9wcmU+XG4gPC9zZWN0aW9uPlxuIDxzZWN0aW9uPlxuICAgPGgzPlRpbWluZyBvZiBXZWIgQXVkaW8gQVBJPC9oMz5cbiAgIDxwcmUgY2xhc3M9XCJmcmFnbWVudFwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSA+XG52YXIgbm93ID0gY29udGV4dC5jdXJyZW50VGltZTtcbm9zY2lsbGF0b3IucGxheShub3cgKyAxKTtcbm9zY2lsbGF0b3Iuc3RvcChub3cgKyAzKTtcbiAgICAgPC9jb2RlPlxuICAgPC9wcmU+XG4gICA8cCBjbGFzcz1cImZyYWdtZW50XCI+QXVkaW9QYXJhbS5zZXRWYWx1ZUF0VGltZSh2YWx1ZSwgc3RhcnRUaW1lKTwvcD5cbiAgIDxwcmUgc3R5bGU9XCJ3aWR0aDoxMDAlXCIgY2xhc3M9XCJmcmFnbWVudFwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSA+XG4gICAgIG9zY2lsbGF0b3IuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDI2MS42LCBjb250ZXh0LmN1cnJlbnRUaW1lICsgMSk7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cblxuICAgPHAgY2xhc3M9XCJmcmFnbWVudFwiPkF1ZGlvUGFyYW0uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSh2YWx1ZSwgZW5kVGltZSk8L3A+XG4gICA8cHJlIHN0eWxlPVwid2lkdGg6MTAwJVwiIGNsYXNzPVwiZnJhZ21lbnRcIj48Y29kZSBjbGFzcz1cImhsanNcIiBkYXRhLXRyaW0gPlxuICAgICAgICAgICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCBjb250ZXh0LmN1cnJlbnRUaW1lICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgICAgICAgICAgPC9wcmU+XG4gPC9zZWN0aW9uPlxuIDxzZWN0aW9uPlxuICAgPHNlY3Rpb24+XG4gICAgIDxoMz5yZWNvcmRlZCBzb3VuZDwvaDM+XG5cbiAgICAgPHAgY2xhc3M9XCJmcmFnbWVudFwiPmxvYWRpbmcgYSBzb3VuZCBzYW1wbGU8L3A+XG4gICAgIDxwcmUgY2xhc3M9XCJmcmFnbWVudFwiIHN0eWxlPVwid2lkdGg6IDEwNSVcIj48Y29kZSBjbGFzcz1cImhsanNcIiBkYXRhLXRyaW0gc3R5bGU9XCJtYXgtaGVpZ2h0OiAxMjAwcHhcIiA+XG4gICAgIHZhciBkb2dCYXJraW5nQnVmZmVyID0gbnVsbDtcbiAgICAgLy8gRml4IHVwIHByZWZpeGluZ1xuICAgICB3aW5kb3cuQXVkaW9Db250ZXh0ID0gd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O1xuICAgICB2YXIgY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcblxuICAgICBmdW5jdGlvbiBsb2FkRG9nU291bmQodXJsKSB7XG4gICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgIHJlcXVlc3Qub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuXG4gICAgIC8vIERlY29kZSBhc3luY2hyb25vdXNseVxuICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgIGNvbnRleHQuZGVjb2RlQXVkaW9EYXRhKHJlcXVlc3QucmVzcG9uc2UsIGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgIGRvZ0JhcmtpbmdCdWZmZXIgPSBidWZmZXI7XG4gICAgICAgfSwgb25FcnJvcik7XG4gICAgIH1cbiAgICAgcmVxdWVzdC5zZW5kKCk7XG4gICAgIH1cbiAgICAgPC9jb2RlPjwvcHJlPlxuXG4gICA8L3NlY3Rpb24+XG5cbiAgIDxzZWN0aW9uPlxuICAgICA8aDQ+UGxheWluZyBzb3VuZHM8L2g0PlxuICAgICA8cHJlIHN0eWxlPVwid2lkdGg6IDEwNSVcIj48Y29kZSBjbGFzcz1cImhsanNcIiBkYXRhLXRyaW0gPlxuICAgLy8gRml4IHVwIHByZWZpeGluZ1xuICAgd2luZG93LkF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtcbiAgIHZhciBjb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgXG4gICBmdW5jdGlvbiBwbGF5U291bmQoYnVmZmVyKSB7XG4gICAgIHZhciBzb3VyY2UgPSBjb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOyAvLyBjcmVhdGVzIGEgc291bmQgc291cmNlXG4gICAgIHNvdXJjZS5idWZmZXIgPSBidWZmZXI7ICAgICAgICAgICAgICAgICAgICAvLyB0ZWxsIHdoaWNoIHNvdW5kIHRvIHBsYXlcbiAgICAgc291cmNlLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7ICAgICAgIC8vIGNvbm5lY3QgdG8gdGhlIGRlc3RpbmF0aW9uIFxuICAgICBzb3VyY2Uuc3RhcnQoMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGxheSB0aGUgc291cmNlIG5vd1x0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxuICAgfVxuICAgXG4gICA8L2NvZGU+PC9wcmU+XG4gICA8L3NlY3Rpb24+XG4gICA8c2VjdGlvbj5cbiAgICAgPGg0PkNoYW5naW5nIHRoZSB2b2x1bWUgb2YgYSBzb3VuZDwvaDQ+XG4gICAgIDxwcmUgc3R5bGU9XCJ3aWR0aDogMTA1JVwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSA+XG4gICAvLyBDcmVhdGUgYSBnYWluIG5vZGUuXG4gICB2YXIgZ2Fpbk5vZGUgPSBjb250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgIC8vIENvbm5lY3QgdGhlIHNvdXJjZSB0byB0aGUgZ2FpbiBub2RlLlxuICAgc291cmNlLmNvbm5lY3QoZ2Fpbk5vZGUpO1xuICAgLy8gQ29ubmVjdCB0aGUgZ2FpbiBub2RlIHRvIHRoZSBkZXN0aW5hdGlvbi5cbiAgIGdhaW5Ob2RlLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAvLyBSZWR1Y2UgdGhlIHZvbHVtZS5cbiAgIGdhaW5Ob2RlLmdhaW4udmFsdWUgPSAwLjU7XG4gICA8L2NvZGU+PC9wcmU+XG4gICA8L3NlY3Rpb24+XG4gPC9zZWN0aW9uPlxuIDxzZWN0aW9uPlxuICAgPHNlY3Rpb24+XG4gICAgIDxpbWcgc3JjPVwiaW1hZ2VzL2F1ZGlvLWNvbnRleHQtbXVsdGkucG5nXCIgYWx0PVwiYXVkaW8tY29udGV4dC1tdWx0aVwiIHN0eWxlPVwid2lkdGg6IDYwJVwiPlxuICAgPC9zZWN0aW9uPlxuICAgPHNlY3Rpb24+XG4gICAgIDxoND5BYnN0cmFjdGluZyB0aGUgV2ViIEF1ZGlvIEFQSTwvaDQ+XG4gICAgIDxwcmUgY2xhc3M9XCJmcmFnbWVudFwiIHN0eWxlPVwid2lkdGg6IDEwNSVcIj48Y29kZSBjbGFzcz1cImhsanNcIiBkYXRhLXRyaW0gIHN0eWxlPVwibWF4LWhlaWdodDogMTIwMHB4XCI+XG4gICB3aW5kb3cub25sb2FkID0gaW5pdDtcbiAgIHZhciBjb250ZXh0O1xuICAgdmFyIGJ1ZmZlckxvYWRlcjtcbiAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgIGNvbnRleHQgPSBuZXcgd2Via2l0QXVkaW9Db250ZXh0KCk7XG4gICAgIGJ1ZmZlckxvYWRlciA9IG5ldyBCdWZmZXJMb2FkZXIoXG4gICAgIGNvbnRleHQsXG4gICAgIFsgJy4uL3NvdW5kcy9oeXBlci1yZWFsaXR5L2JyLWphbS1sb29wLndhdicsXG4gICAgICAgJy4uL3NvdW5kcy9oeXBlci1yZWFsaXR5L2xhdWdodGVyLndhdicsIF0sXG4gICAgIGZpbmlzaGVkTG9hZGluZ1xuICAgICApO1xuICAgYnVmZmVyTG9hZGVyLmxvYWQoKTtcbiAgIH1cbiAgIGZ1bmN0aW9uIGZpbmlzaGVkTG9hZGluZyhidWZmZXJMaXN0KSB7XG4gICAgIC8vIENyZWF0ZSB0d28gc291cmNlcyBhbmQgcGxheSB0aGVtIGJvdGggdG9nZXRoZXIuXG4gICAgIHZhciBzb3VyY2UxID0gY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgdmFyIHNvdXJjZTIgPSBjb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICBzb3VyY2UxLmJ1ZmZlciA9IGJ1ZmZlckxpc3RbMF07XG4gICAgIHNvdXJjZTIuYnVmZmVyID0gYnVmZmVyTGlzdFsxXTtcbiAgICAgc291cmNlMS5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICBzb3VyY2UyLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgIHNvdXJjZTEuc3RhcnQoMCk7XG4gICAgIHNvdXJjZTIuc3RhcnQoMCk7XG4gICB9XG4gICBcbiAgIDwvY29kZT48L3ByZT5cbiAgIDwvc2VjdGlvbj5cbiA8L3NlY3Rpb24+XG4gPHNlY3Rpb24gZGF0YS1iYWNrZ3JvdW5kPVwiaW1hZ2VzL3NvdW5kLXdhdmUyLmpwZ1wiIGRhdGEtYmFja2dyb3VuZC1vcGFjaXR5PVwiMC40XCIgIGRhdGEtYmFja2dyb3VuZC10cmFuc2l0aW9uPVwiY29udmV4XCI+XG4gICA8cD5UaGFuayB5b3U8L3A+XG4gPC9zZWN0aW9uPlxuXG4gPC9zZWN0aW9uPlxuXG4gPC9kaXY+XG48L2Rpdj5gO1xuXG5SZXZlYWwuaW5pdGlhbGl6ZSh7XG4gIGNvbnRyb2xzOiB0cnVlLFxuICB0b3VjaDogdHJ1ZSxcbiAgZGVwZW5kZW5jaWVzOiBbXG4gICAgeyBzcmM6ICdwbHVnaW4vaGlnaGxpZ2h0L2hpZ2hsaWdodC5qcycsIGFzeW5jOiB0cnVlIH0sXG4gICAgeyBzcmM6ICdwbHVnaW4vbm90ZXMvbm90ZXMuanMnLCBhc3luYzogdHJ1ZSB9LFxuICBdLFxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==