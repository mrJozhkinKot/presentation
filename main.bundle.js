!function(n){function e(e){for(var o,r,s=e[0],c=e[1],d=e[2],l=0,p=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(n[o]=c[o]);for(u&&u(e);p.length;)p.shift()();return i.push.apply(i,d||[]),t()}function t(){for(var n,e=0;e<i.length;e++){for(var t=i[e],o=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(o=!1)}o&&(i.splice(e--,1),n=r(r.s=t[0]))}return n}var o={},a={0:0},i=[];function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=o,r.d=function(n,e,t){r.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)r.d(t,o,function(e){return n[e]}.bind(null,o));return t},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var u=c;i.push([1,1]),t()}([,function(n,e,t){"use strict";t.r(e);var o=t(0),a=t.n(o);t(2);document.body.innerHTML='<div class="reveal">\n<div class="slides">\n  <section data-transition="slide" data-background="images/sound-wave.jpg" data-background-opacity="0.4">\n    <h2 style="color:rgb(149, 207, 255)">Web Audio API</h2>\n  </section>\n  <section>\n    <p>The Web Audio API provides a powerful and versatile system for controlling audio on the Web, allowing\n      developers to choose audio sources, add effects to audio, create audio visualizations and much more.\n    </p>\n  </section>\n\n  <section>\n    <section data-background=\'#fff\'>\n      <img src="images/audio-history.jpg" alt="audio-history" style="width: 100%">\n    </section>\n    <section>\n      <p>The Web Audio API involves handling audio operations inside an audio context,\n        and has been designed to allow modular routing. Basic audio operations are performed\n        with audio nodes, which are linked together to form an audio routing graph.\n      </p>\n    </section>\n    <section>\n      <p>Audio nodes are linked into chains and simple webs by their inputs and outputs. They typically\n        start\n        with one or more sources. Sources provide arrays of sound intensities (samples) at very small\n        timeslices,\n        often tens of thousands of them per second.\n      </p>\n    </section>\n  </section>\n  <section>\n    <img src="images/audio-context.png" alt="audio-context">\n    <pre class="fragment" style="width: 100%;"><code class="hljs" data-trim >\n      var context = new (window.AudioContext || window.webkitAudioContext)();\n    </code></pre>\n  </section>\n  <section id="fragments">\n    <h3> There are three types of sources:</h3>\n    <ul>\n      <li class="fragment"><span>Oscillator</span> <span class="fragment">\n          – mathematically computed sounds</span></li>\n      <li class="fragment"><span>Audio Samples</span> <span class="fragment">\n          – from audio/video files</span></li>\n      <li class="fragment"><span>Audio Stream</span> <span class="fragment">\n          – audio from webcam or microphone</span></li>\n    </ul>\n  </section>\n  <section>\n    <h3>oscillator</h3>\n    <img src="images/waveforms.png" alt="waveforms" class="fragment" style="width: 70%;">\n    <pre class="fragment"><code class="hljs" data-trim >\nOscillatorNode.type = \'sine\'|\'square\'|\'triangle\'|\'sawtooth\';\n</code>\n      </pre>\n\n  </section>\n  <section>\n    <pre style="width:100%"><code class="hljs" data-trim data-line-numbers="1|2|3|4|5|6">\nvar context = new (window.AudioContext || window.webkitAudioContext)();\nvar oscillator = context.createOscillator();\noscillator.type = \'sine\';\noscillator.frequency.value = 440;\noscillator.connect(context.destination);\noscillator.start();\n</code>\n    </pre>\n  </section>\n  <section>\n    <h3>Timing of Web Audio API</h3>\n    <pre class="fragment"><code class="hljs" data-trim >\nvar now = context.currentTime;\noscillator.play(now + 1);\noscillator.stop(now + 3);\n      </code>\n    </pre>\n    <p class="fragment">AudioParam.setValueAtTime(value, startTime)</p>\n    <pre style="width:100%" class="fragment"><code class="hljs" data-trim >\n      oscillator.frequency.setValueAtTime(261.6, context.currentTime + 1);\n              </code>\n            </pre>\n\n    <p class="fragment">AudioParam.exponentialRampToValueAtTime(value, endTime)</p>\n    <pre style="width:100%" class="fragment"><code class="hljs" data-trim >\n              gain.gain.exponentialRampToValueAtTime(0.001, context.currentTime + 1);\n                      </code>\n                    </pre>\n  </section>\n  <section>\n    <section>\n      <h3>recorded sound</h3>\n\n      <p class="fragment">loading a sound sample</p>\n      <pre class="fragment" style="width: 105%"><code class="hljs" data-trim style="max-height: 1200px" >\n      var dogBarkingBuffer = null;\n      // Fix up prefixing\n      window.AudioContext = window.AudioContext || window.webkitAudioContext;\n      var context = new AudioContext();\n\n      function loadDogSound(url) {\n      var request = new XMLHttpRequest();\n      request.open(\'GET\', url, true);\n      request.responseType = \'arraybuffer\';\n\n      // Decode asynchronously\n      request.onload = function() {\n        context.decodeAudioData(request.response, function(buffer) {\n        dogBarkingBuffer = buffer;\n        }, onError);\n      }\n      request.send();\n      }\n      </code></pre>\n\n    </section>\n\n    <section>\n      <h4>Playing sounds</h4>\n      <pre style="width: 105%"><code class="hljs" data-trim >\n    // Fix up prefixing\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n    var context = new AudioContext();\n    \n    function playSound(buffer) {\n      var source = context.createBufferSource(); // creates a sound source\n      source.buffer = buffer;                    // tell which sound to play\n      source.connect(context.destination);       // connect to the destination \n      source.start(0);                           // play the source now\t\t\t\t\t\t\t\t\t\t\t\t\n    }\n    \n    </code></pre>\n    </section>\n    <section>\n      <h4>Changing the volume of a sound</h4>\n      <pre style="width: 105%"><code class="hljs" data-trim >\n    // Create a gain node.\n    var gainNode = context.createGain();\n    // Connect the source to the gain node.\n    source.connect(gainNode);\n    // Connect the gain node to the destination.\n    gainNode.connect(context.destination);\n    // Reduce the volume.\n    gainNode.gain.value = 0.5;\n    </code></pre>\n    </section>\n  </section>\n  <section>\n    <section>\n      <img src="images/audio-context-multi.png" alt="audio-context-multi" style="width: 60%">\n    </section>\n    <section>\n      <h4>Abstracting the Web Audio API</h4>\n      <pre class="fragment" style="width: 105%"><code class="hljs" data-trim  style="max-height: 1200px">\n    window.onload = init;\n    var context;\n    var bufferLoader;\n    function init() {\n      context = new webkitAudioContext();\n      bufferLoader = new BufferLoader(\n      context,\n      [ \'../sounds/hyper-reality/br-jam-loop.wav\',\n        \'../sounds/hyper-reality/laughter.wav\', ],\n      finishedLoading\n      );\n    bufferLoader.load();\n    }\n    function finishedLoading(bufferList) {\n      // Create two sources and play them both together.\n      var source1 = context.createBufferSource();\n      var source2 = context.createBufferSource();\n      source1.buffer = bufferList[0];\n      source2.buffer = bufferList[1];\n      source1.connect(context.destination);\n      source2.connect(context.destination);\n      source1.start(0);\n      source2.start(0);\n    }\n    \n    </code></pre>\n    </section>\n  </section>\n  <section data-background="image/sound-wave2.jpg" data-background-opacity="0.4"  data-background-transition="convex">\n    <p>Thank you</p>\n  </section>\n\n  </section>\n\n\n</div>\n\n\n\n</div>',a.a.initialize()},function(n,e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2luZGV4LmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiMCIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiZG9jdW1lbnQiLCJib2R5IiwiaW5uZXJIVE1MIiwiUmV2ZWFsIiwiaW5pdGlhbGl6ZSJdLCJtYXBwaW5ncyI6ImFBQ0UsU0FBU0EsRUFBcUJDLEdBUTdCLElBUEEsSUFNSUMsRUFBVUMsRUFOVkMsRUFBV0gsRUFBSyxHQUNoQkksRUFBY0osRUFBSyxHQUNuQkssRUFBaUJMLEVBQUssR0FJSE0sRUFBSSxFQUFHQyxFQUFXLEdBQ3BDRCxFQUFJSCxFQUFTSyxPQUFRRixJQUN6QkosRUFBVUMsRUFBU0csR0FDaEJHLE9BQU9DLFVBQVVDLGVBQWVDLEtBQUtDLEVBQWlCWCxJQUFZVyxFQUFnQlgsSUFDcEZLLEVBQVNPLEtBQUtELEVBQWdCWCxHQUFTLElBRXhDVyxFQUFnQlgsR0FBVyxFQUU1QixJQUFJRCxLQUFZRyxFQUNaSyxPQUFPQyxVQUFVQyxlQUFlQyxLQUFLUixFQUFhSCxLQUNwRGMsRUFBUWQsR0FBWUcsRUFBWUgsSUFLbEMsSUFGR2UsR0FBcUJBLEVBQW9CaEIsR0FFdENPLEVBQVNDLFFBQ2RELEVBQVNVLE9BQVRWLEdBT0QsT0FIQVcsRUFBZ0JKLEtBQUtLLE1BQU1ELEVBQWlCYixHQUFrQixJQUd2RGUsSUFFUixTQUFTQSxJQUVSLElBREEsSUFBSUMsRUFDSWYsRUFBSSxFQUFHQSxFQUFJWSxFQUFnQlYsT0FBUUYsSUFBSyxDQUcvQyxJQUZBLElBQUlnQixFQUFpQkosRUFBZ0JaLEdBQ2pDaUIsR0FBWSxFQUNSQyxFQUFJLEVBQUdBLEVBQUlGLEVBQWVkLE9BQVFnQixJQUFLLENBQzlDLElBQUlDLEVBQVFILEVBQWVFLEdBQ0csSUFBM0JYLEVBQWdCWSxLQUFjRixHQUFZLEdBRTNDQSxJQUNGTCxFQUFnQlEsT0FBT3BCLElBQUssR0FDNUJlLEVBQVNNLEVBQW9CQSxFQUFvQkMsRUFBSU4sRUFBZSxLQUl0RSxPQUFPRCxFQUlSLElBQUlRLEVBQW1CLEdBS25CaEIsRUFBa0IsQ0FDckJpQixFQUFHLEdBR0FaLEVBQWtCLEdBR3RCLFNBQVNTLEVBQW9CMUIsR0FHNUIsR0FBRzRCLEVBQWlCNUIsR0FDbkIsT0FBTzRCLEVBQWlCNUIsR0FBVThCLFFBR25DLElBQUlDLEVBQVNILEVBQWlCNUIsR0FBWSxDQUN6Q0ssRUFBR0wsRUFDSGdDLEdBQUcsRUFDSEYsUUFBUyxJQVVWLE9BTkFoQixFQUFRZCxHQUFVVyxLQUFLb0IsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHL0RLLEVBQU9DLEdBQUksRUFHSkQsRUFBT0QsUUFLZkosRUFBb0JPLEVBQUluQixFQUd4QlksRUFBb0JRLEVBQUlOLEVBR3hCRixFQUFvQlMsRUFBSSxTQUFTTCxFQUFTTSxFQUFNQyxHQUMzQ1gsRUFBb0JZLEVBQUVSLEVBQVNNLElBQ2xDNUIsT0FBTytCLGVBQWVULEVBQVNNLEVBQU0sQ0FBRUksWUFBWSxFQUFNQyxJQUFLSixLQUtoRVgsRUFBb0JnQixFQUFJLFNBQVNaLEdBQ1gsb0JBQVhhLFFBQTBCQSxPQUFPQyxhQUMxQ3BDLE9BQU8rQixlQUFlVCxFQUFTYSxPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RyQyxPQUFPK0IsZUFBZVQsRUFBUyxhQUFjLENBQUVlLE9BQU8sS0FRdkRuQixFQUFvQm9CLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRbkIsRUFBb0JtQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUt6QyxPQUFPMEMsT0FBTyxNQUd2QixHQUZBeEIsRUFBb0JnQixFQUFFTyxHQUN0QnpDLE9BQU8rQixlQUFlVSxFQUFJLFVBQVcsQ0FBRVQsWUFBWSxFQUFNSyxNQUFPQSxJQUN0RCxFQUFQRSxHQUE0QixpQkFBVEYsRUFBbUIsSUFBSSxJQUFJTSxLQUFPTixFQUFPbkIsRUFBb0JTLEVBQUVjLEVBQUlFLEVBQUssU0FBU0EsR0FBTyxPQUFPTixFQUFNTSxJQUFRQyxLQUFLLEtBQU1ELElBQzlJLE9BQU9GLEdBSVJ2QixFQUFvQjJCLEVBQUksU0FBU3RCLEdBQ2hDLElBQUlNLEVBQVNOLEdBQVVBLEVBQU9pQixXQUM3QixXQUF3QixPQUFPakIsRUFBZ0IsU0FDL0MsV0FBOEIsT0FBT0EsR0FFdEMsT0FEQUwsRUFBb0JTLEVBQUVFLEVBQVEsSUFBS0EsR0FDNUJBLEdBSVJYLEVBQW9CWSxFQUFJLFNBQVNnQixFQUFRQyxHQUFZLE9BQU8vQyxPQUFPQyxVQUFVQyxlQUFlQyxLQUFLMkMsRUFBUUMsSUFHekc3QixFQUFvQjhCLEVBQUksR0FFeEIsSUFBSUMsRUFBYUMsT0FBcUIsYUFBSUEsT0FBcUIsY0FBSyxHQUNoRUMsRUFBbUJGLEVBQVc1QyxLQUFLdUMsS0FBS0ssR0FDNUNBLEVBQVc1QyxLQUFPZixFQUNsQjJELEVBQWFBLEVBQVdHLFFBQ3hCLElBQUksSUFBSXZELEVBQUksRUFBR0EsRUFBSW9ELEVBQVdsRCxPQUFRRixJQUFLUCxFQUFxQjJELEVBQVdwRCxJQUMzRSxJQUFJVSxFQUFzQjRDLEVBSTFCMUMsRUFBZ0JKLEtBQUssQ0FBQyxFQUFFLElBRWpCTSxJLGdDQ3ZKVCxnQ0FHQTBDLFNBQVNDLEtBQUtDLFVBQWEsd3dOQWlNM0JDLElBQU9DLGMiLCJmaWxlIjoibWFpbi5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goWzEsMV0pO1xuIFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiByZWFkeVxuIFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4iLCJpbXBvcnQgUmV2ZWFsIGZyb20gJ3JldmVhbC5qcyc7XG5pbXBvcnQgJy4uL3Nhc3MvbWFpbi5zY3NzJztcblxuZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cInJldmVhbFwiPlxuPGRpdiBjbGFzcz1cInNsaWRlc1wiPlxuICA8c2VjdGlvbiBkYXRhLXRyYW5zaXRpb249XCJzbGlkZVwiIGRhdGEtYmFja2dyb3VuZD1cImltYWdlcy9zb3VuZC13YXZlLmpwZ1wiIGRhdGEtYmFja2dyb3VuZC1vcGFjaXR5PVwiMC40XCI+XG4gICAgPGgyIHN0eWxlPVwiY29sb3I6cmdiKDE0OSwgMjA3LCAyNTUpXCI+V2ViIEF1ZGlvIEFQSTwvaDI+XG4gIDwvc2VjdGlvbj5cbiAgPHNlY3Rpb24+XG4gICAgPHA+VGhlIFdlYiBBdWRpbyBBUEkgcHJvdmlkZXMgYSBwb3dlcmZ1bCBhbmQgdmVyc2F0aWxlIHN5c3RlbSBmb3IgY29udHJvbGxpbmcgYXVkaW8gb24gdGhlIFdlYiwgYWxsb3dpbmdcbiAgICAgIGRldmVsb3BlcnMgdG8gY2hvb3NlIGF1ZGlvIHNvdXJjZXMsIGFkZCBlZmZlY3RzIHRvIGF1ZGlvLCBjcmVhdGUgYXVkaW8gdmlzdWFsaXphdGlvbnMgYW5kIG11Y2ggbW9yZS5cbiAgICA8L3A+XG4gIDwvc2VjdGlvbj5cblxuICA8c2VjdGlvbj5cbiAgICA8c2VjdGlvbiBkYXRhLWJhY2tncm91bmQ9JyNmZmYnPlxuICAgICAgPGltZyBzcmM9XCJpbWFnZXMvYXVkaW8taGlzdG9yeS5qcGdcIiBhbHQ9XCJhdWRpby1oaXN0b3J5XCIgc3R5bGU9XCJ3aWR0aDogMTAwJVwiPlxuICAgIDwvc2VjdGlvbj5cbiAgICA8c2VjdGlvbj5cbiAgICAgIDxwPlRoZSBXZWIgQXVkaW8gQVBJIGludm9sdmVzIGhhbmRsaW5nIGF1ZGlvIG9wZXJhdGlvbnMgaW5zaWRlIGFuIGF1ZGlvIGNvbnRleHQsXG4gICAgICAgIGFuZCBoYXMgYmVlbiBkZXNpZ25lZCB0byBhbGxvdyBtb2R1bGFyIHJvdXRpbmcuIEJhc2ljIGF1ZGlvIG9wZXJhdGlvbnMgYXJlIHBlcmZvcm1lZFxuICAgICAgICB3aXRoIGF1ZGlvIG5vZGVzLCB3aGljaCBhcmUgbGlua2VkIHRvZ2V0aGVyIHRvIGZvcm0gYW4gYXVkaW8gcm91dGluZyBncmFwaC5cbiAgICAgIDwvcD5cbiAgICA8L3NlY3Rpb24+XG4gICAgPHNlY3Rpb24+XG4gICAgICA8cD5BdWRpbyBub2RlcyBhcmUgbGlua2VkIGludG8gY2hhaW5zIGFuZCBzaW1wbGUgd2VicyBieSB0aGVpciBpbnB1dHMgYW5kIG91dHB1dHMuIFRoZXkgdHlwaWNhbGx5XG4gICAgICAgIHN0YXJ0XG4gICAgICAgIHdpdGggb25lIG9yIG1vcmUgc291cmNlcy4gU291cmNlcyBwcm92aWRlIGFycmF5cyBvZiBzb3VuZCBpbnRlbnNpdGllcyAoc2FtcGxlcykgYXQgdmVyeSBzbWFsbFxuICAgICAgICB0aW1lc2xpY2VzLFxuICAgICAgICBvZnRlbiB0ZW5zIG9mIHRob3VzYW5kcyBvZiB0aGVtIHBlciBzZWNvbmQuXG4gICAgICA8L3A+XG4gICAgPC9zZWN0aW9uPlxuICA8L3NlY3Rpb24+XG4gIDxzZWN0aW9uPlxuICAgIDxpbWcgc3JjPVwiaW1hZ2VzL2F1ZGlvLWNvbnRleHQucG5nXCIgYWx0PVwiYXVkaW8tY29udGV4dFwiPlxuICAgIDxwcmUgY2xhc3M9XCJmcmFnbWVudFwiIHN0eWxlPVwid2lkdGg6IDEwMCU7XCI+PGNvZGUgY2xhc3M9XCJobGpzXCIgZGF0YS10cmltID5cbiAgICAgIHZhciBjb250ZXh0ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKCk7XG4gICAgPC9jb2RlPjwvcHJlPlxuICA8L3NlY3Rpb24+XG4gIDxzZWN0aW9uIGlkPVwiZnJhZ21lbnRzXCI+XG4gICAgPGgzPiBUaGVyZSBhcmUgdGhyZWUgdHlwZXMgb2Ygc291cmNlczo8L2gzPlxuICAgIDx1bD5cbiAgICAgIDxsaSBjbGFzcz1cImZyYWdtZW50XCI+PHNwYW4+T3NjaWxsYXRvcjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJmcmFnbWVudFwiPlxuICAgICAgICAgIOKAkyBtYXRoZW1hdGljYWxseSBjb21wdXRlZCBzb3VuZHM8L3NwYW4+PC9saT5cbiAgICAgIDxsaSBjbGFzcz1cImZyYWdtZW50XCI+PHNwYW4+QXVkaW8gU2FtcGxlczwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJmcmFnbWVudFwiPlxuICAgICAgICAgIOKAkyBmcm9tIGF1ZGlvL3ZpZGVvIGZpbGVzPC9zcGFuPjwvbGk+XG4gICAgICA8bGkgY2xhc3M9XCJmcmFnbWVudFwiPjxzcGFuPkF1ZGlvIFN0cmVhbTwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJmcmFnbWVudFwiPlxuICAgICAgICAgIOKAkyBhdWRpbyBmcm9tIHdlYmNhbSBvciBtaWNyb3Bob25lPC9zcGFuPjwvbGk+XG4gICAgPC91bD5cbiAgPC9zZWN0aW9uPlxuICA8c2VjdGlvbj5cbiAgICA8aDM+b3NjaWxsYXRvcjwvaDM+XG4gICAgPGltZyBzcmM9XCJpbWFnZXMvd2F2ZWZvcm1zLnBuZ1wiIGFsdD1cIndhdmVmb3Jtc1wiIGNsYXNzPVwiZnJhZ21lbnRcIiBzdHlsZT1cIndpZHRoOiA3MCU7XCI+XG4gICAgPHByZSBjbGFzcz1cImZyYWdtZW50XCI+PGNvZGUgY2xhc3M9XCJobGpzXCIgZGF0YS10cmltID5cbk9zY2lsbGF0b3JOb2RlLnR5cGUgPSAnc2luZSd8J3NxdWFyZSd8J3RyaWFuZ2xlJ3wnc2F3dG9vdGgnO1xuPC9jb2RlPlxuICAgICAgPC9wcmU+XG5cbiAgPC9zZWN0aW9uPlxuICA8c2VjdGlvbj5cbiAgICA8cHJlIHN0eWxlPVwid2lkdGg6MTAwJVwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSBkYXRhLWxpbmUtbnVtYmVycz1cIjF8MnwzfDR8NXw2XCI+XG52YXIgY29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpO1xudmFyIG9zY2lsbGF0b3IgPSBjb250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKTtcbm9zY2lsbGF0b3IudHlwZSA9ICdzaW5lJztcbm9zY2lsbGF0b3IuZnJlcXVlbmN5LnZhbHVlID0gNDQwO1xub3NjaWxsYXRvci5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xub3NjaWxsYXRvci5zdGFydCgpO1xuPC9jb2RlPlxuICAgIDwvcHJlPlxuICA8L3NlY3Rpb24+XG4gIDxzZWN0aW9uPlxuICAgIDxoMz5UaW1pbmcgb2YgV2ViIEF1ZGlvIEFQSTwvaDM+XG4gICAgPHByZSBjbGFzcz1cImZyYWdtZW50XCI+PGNvZGUgY2xhc3M9XCJobGpzXCIgZGF0YS10cmltID5cbnZhciBub3cgPSBjb250ZXh0LmN1cnJlbnRUaW1lO1xub3NjaWxsYXRvci5wbGF5KG5vdyArIDEpO1xub3NjaWxsYXRvci5zdG9wKG5vdyArIDMpO1xuICAgICAgPC9jb2RlPlxuICAgIDwvcHJlPlxuICAgIDxwIGNsYXNzPVwiZnJhZ21lbnRcIj5BdWRpb1BhcmFtLnNldFZhbHVlQXRUaW1lKHZhbHVlLCBzdGFydFRpbWUpPC9wPlxuICAgIDxwcmUgc3R5bGU9XCJ3aWR0aDoxMDAlXCIgY2xhc3M9XCJmcmFnbWVudFwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSA+XG4gICAgICBvc2NpbGxhdG9yLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSgyNjEuNiwgY29udGV4dC5jdXJyZW50VGltZSArIDEpO1xuICAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgICA8L3ByZT5cblxuICAgIDxwIGNsYXNzPVwiZnJhZ21lbnRcIj5BdWRpb1BhcmFtLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodmFsdWUsIGVuZFRpbWUpPC9wPlxuICAgIDxwcmUgc3R5bGU9XCJ3aWR0aDoxMDAlXCIgY2xhc3M9XCJmcmFnbWVudFwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSA+XG4gICAgICAgICAgICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCBjb250ZXh0LmN1cnJlbnRUaW1lICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICAgICAgICAgICA8L3ByZT5cbiAgPC9zZWN0aW9uPlxuICA8c2VjdGlvbj5cbiAgICA8c2VjdGlvbj5cbiAgICAgIDxoMz5yZWNvcmRlZCBzb3VuZDwvaDM+XG5cbiAgICAgIDxwIGNsYXNzPVwiZnJhZ21lbnRcIj5sb2FkaW5nIGEgc291bmQgc2FtcGxlPC9wPlxuICAgICAgPHByZSBjbGFzcz1cImZyYWdtZW50XCIgc3R5bGU9XCJ3aWR0aDogMTA1JVwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSBzdHlsZT1cIm1heC1oZWlnaHQ6IDEyMDBweFwiID5cbiAgICAgIHZhciBkb2dCYXJraW5nQnVmZmVyID0gbnVsbDtcbiAgICAgIC8vIEZpeCB1cCBwcmVmaXhpbmdcbiAgICAgIHdpbmRvdy5BdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7XG4gICAgICB2YXIgY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcblxuICAgICAgZnVuY3Rpb24gbG9hZERvZ1NvdW5kKHVybCkge1xuICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcblxuICAgICAgLy8gRGVjb2RlIGFzeW5jaHJvbm91c2x5XG4gICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb250ZXh0LmRlY29kZUF1ZGlvRGF0YShyZXF1ZXN0LnJlc3BvbnNlLCBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgICAgZG9nQmFya2luZ0J1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgfSwgb25FcnJvcik7XG4gICAgICB9XG4gICAgICByZXF1ZXN0LnNlbmQoKTtcbiAgICAgIH1cbiAgICAgIDwvY29kZT48L3ByZT5cblxuICAgIDwvc2VjdGlvbj5cblxuICAgIDxzZWN0aW9uPlxuICAgICAgPGg0PlBsYXlpbmcgc291bmRzPC9oND5cbiAgICAgIDxwcmUgc3R5bGU9XCJ3aWR0aDogMTA1JVwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSA+XG4gICAgLy8gRml4IHVwIHByZWZpeGluZ1xuICAgIHdpbmRvdy5BdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7XG4gICAgXG4gICAgZnVuY3Rpb24gcGxheVNvdW5kKGJ1ZmZlcikge1xuICAgICAgdmFyIHNvdXJjZSA9IGNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7IC8vIGNyZWF0ZXMgYSBzb3VuZCBzb3VyY2VcbiAgICAgIHNvdXJjZS5idWZmZXIgPSBidWZmZXI7ICAgICAgICAgICAgICAgICAgICAvLyB0ZWxsIHdoaWNoIHNvdW5kIHRvIHBsYXlcbiAgICAgIHNvdXJjZS5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pOyAgICAgICAvLyBjb25uZWN0IHRvIHRoZSBkZXN0aW5hdGlvbiBcbiAgICAgIHNvdXJjZS5zdGFydCgwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwbGF5IHRoZSBzb3VyY2Ugbm93XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XG4gICAgfVxuICAgIFxuICAgIDwvY29kZT48L3ByZT5cbiAgICA8L3NlY3Rpb24+XG4gICAgPHNlY3Rpb24+XG4gICAgICA8aDQ+Q2hhbmdpbmcgdGhlIHZvbHVtZSBvZiBhIHNvdW5kPC9oND5cbiAgICAgIDxwcmUgc3R5bGU9XCJ3aWR0aDogMTA1JVwiPjxjb2RlIGNsYXNzPVwiaGxqc1wiIGRhdGEtdHJpbSA+XG4gICAgLy8gQ3JlYXRlIGEgZ2FpbiBub2RlLlxuICAgIHZhciBnYWluTm9kZSA9IGNvbnRleHQuY3JlYXRlR2FpbigpO1xuICAgIC8vIENvbm5lY3QgdGhlIHNvdXJjZSB0byB0aGUgZ2FpbiBub2RlLlxuICAgIHNvdXJjZS5jb25uZWN0KGdhaW5Ob2RlKTtcbiAgICAvLyBDb25uZWN0IHRoZSBnYWluIG5vZGUgdG8gdGhlIGRlc3RpbmF0aW9uLlxuICAgIGdhaW5Ob2RlLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgLy8gUmVkdWNlIHRoZSB2b2x1bWUuXG4gICAgZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IDAuNTtcbiAgICA8L2NvZGU+PC9wcmU+XG4gICAgPC9zZWN0aW9uPlxuICA8L3NlY3Rpb24+XG4gIDxzZWN0aW9uPlxuICAgIDxzZWN0aW9uPlxuICAgICAgPGltZyBzcmM9XCJpbWFnZXMvYXVkaW8tY29udGV4dC1tdWx0aS5wbmdcIiBhbHQ9XCJhdWRpby1jb250ZXh0LW11bHRpXCIgc3R5bGU9XCJ3aWR0aDogNjAlXCI+XG4gICAgPC9zZWN0aW9uPlxuICAgIDxzZWN0aW9uPlxuICAgICAgPGg0PkFic3RyYWN0aW5nIHRoZSBXZWIgQXVkaW8gQVBJPC9oND5cbiAgICAgIDxwcmUgY2xhc3M9XCJmcmFnbWVudFwiIHN0eWxlPVwid2lkdGg6IDEwNSVcIj48Y29kZSBjbGFzcz1cImhsanNcIiBkYXRhLXRyaW0gIHN0eWxlPVwibWF4LWhlaWdodDogMTIwMHB4XCI+XG4gICAgd2luZG93Lm9ubG9hZCA9IGluaXQ7XG4gICAgdmFyIGNvbnRleHQ7XG4gICAgdmFyIGJ1ZmZlckxvYWRlcjtcbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgY29udGV4dCA9IG5ldyB3ZWJraXRBdWRpb0NvbnRleHQoKTtcbiAgICAgIGJ1ZmZlckxvYWRlciA9IG5ldyBCdWZmZXJMb2FkZXIoXG4gICAgICBjb250ZXh0LFxuICAgICAgWyAnLi4vc291bmRzL2h5cGVyLXJlYWxpdHkvYnItamFtLWxvb3Aud2F2JyxcbiAgICAgICAgJy4uL3NvdW5kcy9oeXBlci1yZWFsaXR5L2xhdWdodGVyLndhdicsIF0sXG4gICAgICBmaW5pc2hlZExvYWRpbmdcbiAgICAgICk7XG4gICAgYnVmZmVyTG9hZGVyLmxvYWQoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmluaXNoZWRMb2FkaW5nKGJ1ZmZlckxpc3QpIHtcbiAgICAgIC8vIENyZWF0ZSB0d28gc291cmNlcyBhbmQgcGxheSB0aGVtIGJvdGggdG9nZXRoZXIuXG4gICAgICB2YXIgc291cmNlMSA9IGNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICB2YXIgc291cmNlMiA9IGNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICBzb3VyY2UxLmJ1ZmZlciA9IGJ1ZmZlckxpc3RbMF07XG4gICAgICBzb3VyY2UyLmJ1ZmZlciA9IGJ1ZmZlckxpc3RbMV07XG4gICAgICBzb3VyY2UxLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICBzb3VyY2UyLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICBzb3VyY2UxLnN0YXJ0KDApO1xuICAgICAgc291cmNlMi5zdGFydCgwKTtcbiAgICB9XG4gICAgXG4gICAgPC9jb2RlPjwvcHJlPlxuICAgIDwvc2VjdGlvbj5cbiAgPC9zZWN0aW9uPlxuICA8c2VjdGlvbiBkYXRhLWJhY2tncm91bmQ9XCJpbWFnZS9zb3VuZC13YXZlMi5qcGdcIiBkYXRhLWJhY2tncm91bmQtb3BhY2l0eT1cIjAuNFwiICBkYXRhLWJhY2tncm91bmQtdHJhbnNpdGlvbj1cImNvbnZleFwiPlxuICAgIDxwPlRoYW5rIHlvdTwvcD5cbiAgPC9zZWN0aW9uPlxuXG4gIDwvc2VjdGlvbj5cblxuXG48L2Rpdj5cblxuXG5cbjwvZGl2PmA7XG5cblJldmVhbC5pbml0aWFsaXplKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==